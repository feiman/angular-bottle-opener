"use strict";angular.module("bottle.opener",[]).provider("$bottle",function(){function a(a,b){return a.split(":slug").join(b)}function b(a){return localStorage.getItem(a)}function c(a,b){return localStorage.setItem(a,b),b}this.$get=["$http","$q",function(d,e){function f(a,d){d||(d={}),this.key=a,this.api=d.api,this.storage=angular.fromJson(b(this.key)||c(this.key,"{}"))}return f.prototype.all=function(){return this.storage},f.prototype.clean=function(){return this.storage=angular.fromJson("{}"),c(this.key,"{}"),this},f.prototype.get=function(b){var c,f,g;return f=e.defer(),(c=this.storage[b])?f.resolve({data:c}):"undefined"!=typeof this.api?(g=a(this.api,b),d.get(g).then(f.resolve)):f.reject({}),f.promise},f.prototype.set=function(a,b){return this.storage[a]=b,c(this.key,angular.toJson(this.storage)),this},function(a,b){return new f(a,b)}}]});