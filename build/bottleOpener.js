"use strict";angular.module("bottle.opener",[]).provider("$bottle",function(){this.$get=["$http","$q",function(a,b){function c(a){this.key=a.key,this.api=a.api,this.storage=angular.fromJson(d(this.key)||e(this.key,"{}"))}function d(a){return localStorage.getItem(a)}function e(a,b){return localStorage.setItem(a,b),b}return c.prototype.all=function(){return this.storage},c.prototype.clean=function(){return this.storage=angular.fromJson("{}"),e(this.key,"{}"),this},c.prototype.get=function(c){var d,e;return e=b.defer(),(d=this.storage[c])?e.resolve({data:d}):"undefined"!=typeof this.api?a.get(this.api+c).then(e.resolve):e.reject({}),e.promise},c.prototype.set=function(a,b){return this.storage[a]=b,e(this.key,angular.toJson(this.storage)),this},function(a){return new c(a)}}]});